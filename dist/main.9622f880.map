{"version":3,"sources":["main.js"],"names":["$siteList","$","$site","$addButton","$inpWd","xHasMapStr","localStorage","getItem","xHasMap","JSON","parse","hasMap","url","logo","logoType","simplifyUrl","str","replace","render","find","remove","forEach","node","index","link","$li","before","on","e","stopPropagation","splice","window","prompt","trim","indexOf","substring","push","hasMapStr","stringify","setItem","document","unbind","val","attr","keyUp","key","i","length","toUpperCase","open","timeOutEvent","longPress","parentNode","firstElementChild","style","display","s","touchstart","setTimeout","target","preventDefault","touchmove","clearTimeout","touchend","click","addEventListener","a","getElementsByClassName","arr","getParent","obj","ObjStatus","t","path","includes","css"],"mappings":"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","file":"main.9622f880.map","sourceRoot":"..\\src","sourcesContent":["const $siteList = $('.siteList');\r\nconst $site = $('.site');\r\nconst $addButton = $('.addButton');\r\nconst $inpWd = $('.search>input[name=wd]');\r\nlet xHasMapStr = localStorage.getItem('x');\r\nlet xHasMap = JSON.parse(xHasMapStr);\r\nconst hasMap = xHasMap || [\r\n    {url:'https://www.bilibili.com',logo:'B',logoType:'text'},\r\n    {url:'https://www.zhihu.com',logo:'Z',logoType:'text'}\r\n];\r\n\r\nconst simplifyUrl =(str) => {\r\n    return str.replace('http://','')\r\n        .replace('https://','')\r\n        .replace('www.','')\r\n        .replace('/\\/.*/','')\r\n}\r\nconst render = ()=>{\r\n    $siteList.find('.site').remove();\r\n    hasMap.forEach((node,index)=>{\r\n        let link = simplifyUrl(node.url);\r\n        let $li = $(`\r\n        <li class=\"site\">\r\n            <div class=\"delete\">\r\n                <i class=\"iconfont icon-chahao1\"></i>\r\n            </div>\r\n            <a href=\"`+node.url+`\">\r\n                <div class=\"logo\">`+node.logo+`</div>\r\n                <div class=\"link\">`+link+`</div>\r\n            </a>\r\n        </li>`)\r\n        $addButton.before($li);\r\n        $li.on('click','.delete',(e)=>{\r\n            e.stopPropagation();\r\n            hasMap.splice(index,1);\r\n            render();\r\n        })\r\n    });\r\n}\r\nrender();\r\n\r\n\r\n$addButton.on('click',()=>{\r\n    let url = window.prompt('请输入要添加的网址！') || '';\r\n    url = url && url.trim();\r\n    let logo = url;\r\n    if(url && url.indexOf('http') !== 0){\r\n        url = 'https://'+url;\r\n    }\r\n    logo = simplifyUrl(logo).substring(0,1);\r\n    if(logo){\r\n        hasMap.push({\r\n            url:url,\r\n            logo:logo,\r\n            logoType:'text'\r\n        })\r\n    }\r\n    render();\r\n    let hasMapStr = JSON.stringify(hasMap);\r\n    localStorage.setItem('x',hasMapStr);\r\n})\r\n\r\n$inpWd.on('focus',()=>{\r\n    $(document).unbind('keyup');\r\n})\r\n\r\n$inpWd.on('blur',()=>{\r\n    if($inpWd.val()){\r\n        $('.sub').attr('type','submit');\r\n    }\r\n    $(document).on('keyup',(e)=>{keyUp(e)});\r\n})\r\n//当输入框失去焦点的时候才能通过键盘事件跳转\r\n$(document).on('keyup',(e)=>{keyUp(e)});\r\nfunction keyUp(e){\r\n    let key = e.key;\r\n    for(let i = 0; i < hasMap.length; i++){\r\n        if(hasMap[i].logo === key || hasMap[i].logo === key.toUpperCase()){\r\n            window.open(hasMap[i].url,'_self');\r\n        }\r\n    }\r\n}\r\n\r\n// 移动端长按触发delete显示\r\nlet timeOutEvent = 0;\r\nfunction longPress(node){\r\n    // node.find('.delete').css('display','block');\r\n    node.parentNode.parentNode.firstElementChild.style.display = 'block';\r\n}\r\nlet s = true;\r\n$siteList.on({\r\n    touchstart:(e)=>{\r\n        s = true;\r\n        timeOutEvent = setTimeout(function(){\r\n            longPress(e.target);\r\n            s = false;\r\n        },1000);\r\n        e.preventDefault();\r\n    },\r\n    touchmove:()=>{\r\n        clearTimeout(timeOutEvent);\r\n        timeOutEvent = 0;\r\n    },\r\n    touchend:(e)=>{\r\n        clearTimeout(timeOutEvent);\r\n        if(s){\r\n            e.target.click();\r\n        }\r\n    }\r\n})\r\n\r\n/*触摸delete以外的元素，将delete隐藏 */\r\ndocument.addEventListener('touchstart', (e) => {\r\n})\r\nlet a = document.getElementsByClassName('delete')[0]\r\nlet arr = []\r\narr.push(a)\t // 先推入当前元素\r\ngetParent(a) // 执行递归\r\narr.push(window) // 最后再加一个window\r\nfunction getParent(obj) {\r\n    if (obj.parentNode) { // 往树的上层追溯，直到最上层\r\n        arr.push(obj.parentNode)\r\n    } else {\r\n        return\r\n\t}\r\n    getParent(obj.parentNode) // 递归追溯源头\r\n}\r\nlet ObjStatus = document.getElementsByClassName('status')[0]\r\ndocument.addEventListener('touchstart', (e) => {\r\n    let t = document.getElementsByClassName('demo')[0] // 最外层元素\r\n    if (!e.path.includes(t)) {\r\n        $siteList.find('.delete').css('display','none');\r\n\t}\r\n})"]}